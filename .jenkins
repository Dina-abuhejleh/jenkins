pipeline {
    agent any
    environment {
        memory =sh(returnStdout: true, script: "free -m | awk 'NR==2{printf \"%.2f%%\",\$3*100/\$2}'")
    }
    stages {
          
        stage('Build') {
            steps {
                 sh 'hostname'
                 sh 'free -m'
                 echo "Running ${env.BUILD_ID}"
                 sh 'w'
                 echo "Running ${env.memory}"
            }
        }     
    }
}
